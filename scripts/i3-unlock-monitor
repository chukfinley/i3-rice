#!/bin/bash
# Monitor for screen unlock events and restore monitor layout + workspaces
# Runs as a background daemon, listens for logind Unlock signal

dbus-monitor --session "type='signal',interface='org.gnome.ScreenSaver'" 2>/dev/null | while read -r line; do
    if echo "$line" | grep -q "boolean false"; then
        # Screen was unlocked
        sleep 1
        xrandr --output eDP-1 --primary --mode 1920x1080 --pos 0x0 --output HDMI-1 --mode 1920x1080 --pos 1920x0 2>/dev/null
        sleep 0.3
        ~/.local/bin/i3-assign-workspaces
    fi
done
